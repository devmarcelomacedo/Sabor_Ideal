<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabor Ideal - Gourmet</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #c0392b; --dark: #2c3e50; --light: #f4f7f6; --white: #ffffff; --green: #25d366; }
        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background: var(--light); color: var(--dark); margin: 0; padding-bottom: 50px; }
        
        header { background: var(--dark); color: var(--white); padding: 15px; text-align: center; border-bottom: 4px solid var(--primary); }
        .progress-bar { display: flex; justify-content: center; gap: 20px; padding: 12px; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .step { font-size: 10px; color: #bbb; font-weight: 700; text-transform: uppercase; }
        .step.active { color: var(--primary); border-bottom: 2px solid var(--primary); }

        .screen { max-width: 600px; margin: 0 auto; padding: 15px; }
        .hidden { display: none !important; }

        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .product-card { background: var(--white); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.08); cursor: pointer; border: 1px solid #eee; display: flex; flex-direction: column; }
        .product-img { width: 100%; height: 120px; background-size: cover; background-position: center; }
        .product-info { padding: 10px; flex-grow: 1; }
        .product-info h4 { margin: 0; font-size: 13px; }
        .product-info strong { color: var(--primary); font-size: 14px; display: block; margin-top: 5px; }

        /* Modal Estilo App */
        #modal-qty { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: flex-end; z-index: 9999; }
        .modal-body { background: white; width: 100%; max-width: 500px; border-radius: 20px 20px 0 0; padding: 20px; max-height: 90vh; overflow-y: auto; }
        
        .options-group { background: #fdfdfd; padding: 12px; border-radius: 10px; border: 1px solid #eee; margin-bottom: 12px; }
        .options-group strong { display: block; margin-bottom: 8px; font-size: 12px; color: var(--primary); text-transform: uppercase; border-left: 3px solid var(--primary); padding-left: 8px; }
        .option-item { display: flex; align-items: center; gap: 10px; font-size: 14px; padding: 10px 0; border-bottom: 1px solid #f1f1f1; cursor: pointer; }
        .option-item input { width: 18px; height: 18px; accent-color: var(--primary); }
        
        .btn { padding: 15px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; width: 100%; margin-top: 10px; text-transform: uppercase; }
        .btn-main { background: var(--primary); color: white; }
        .btn-whatsapp { background: var(--green); color: white; font-size: 16px; }
        
        textarea, input, select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; margin-top: 5px; font-family: inherit; }
        .resumo-item { background: #fff; padding: 12px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--primary); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0; font-size: 18px;">SABOR IDEAL GOURMET</h1>
    <small style="color: var(--green); font-weight: 600;">(22) 98830-2170</small>
</header>

<nav class="progress-bar">
    <div id="step-1" class="step active">In√≠cio</div>
    <div id="step-2" class="step">Escolha</div>
    <div id="step-3" class="step">Pedido</div>
</nav>

<section id="tela-inicio" class="screen">
    <div class="menu-grid">
        <div class="product-card" onclick="irPara('tela-lanches')">
            <div class="product-img" style="background-image: url('https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400')"></div>
            <div class="product-info"><h4>Refei√ß√µes (Marmitas)</h4></div>
        </div>
        <div class="product-card" onclick="irPara('tela-lanches')">
            <div class="product-img" style="background-image: url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400')"></div>
            <div class="product-info"><h4>Lanches e Bebidas</h4></div>
        </div>
    </div>
</section>

<section id="tela-lanches" class="screen hidden">
    <button class="btn" style="background:#ddd; margin-bottom:15px; padding: 10px;" onclick="irPara('tela-inicio')">‚Üê Voltar Categorias</button>
    <div id="grid-produtos" class="menu-grid"></div>
    <button class="btn btn-main" style="position: sticky; bottom: 10px;" onclick="irPara('tela-carrinho')" id="btn-resumo">Ver Carrinho (0)</button>
</section>

<section id="tela-carrinho" class="screen hidden">
    <h3 style="margin-top:0">Itens Selecionados</h3>
    <div id="lista-carrinho"></div>
    
    <div style="background: #fff; padding: 15px; border-radius: 12px; margin-top: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
        <strong style="font-size: 14px;">Seu Nome:</strong> 
        <input type="text" id="cliente-nome" placeholder="Digite seu nome">
        <br><br>
        <strong style="font-size: 14px;">Mesa / Endere√ßo de Entrega:</strong> 
        <input type="text" id="cliente-local" placeholder="Ex: Mesa 02 ou Rua Brasil, 10">
        <br><br>
        <strong style="font-size: 14px;">Forma de Pagamento:</strong>
        <select id="pagamento">
            <option value="Pix">Pix</option>
            <option value="Cart√£o de D√©bito/Cr√©dito">Cart√£o de D√©bito/Cr√©dito</option>
            <option value="Dinheiro">Dinheiro</option>
        </select>
    </div>
    
    <div style="text-align: right; padding: 20px 0;"><h2 id="total-valor">Total: R$ 0,00</h2></div>
    <button class="btn btn-whatsapp" onclick="enviarWhatsApp()">üöÄ Finalizar via WhatsApp</button>
</section>

<section id="tela-sucesso" class="screen hidden" style="text-align:center">
    <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
    <h2>Pedido Enviado!</h2>
    <p>Seu pedido foi formatado e enviado com sucesso. Por favor, aguarde nosso retorno no WhatsApp.</p>
    <button class="btn btn-main" onclick="location.reload()">Fazer Novo Pedido</button>
</section>

<div id="modal-qty" class="hidden">
    <div class="modal-body">
        <h2 id="modal-nome" style="margin-bottom: 5px;">Item</h2>
        <div id="area-customizacao"></div>
        <div class="options-group">
            <strong>Quantidade:</strong>
            <div style="display:flex; justify-content:center; gap:25px; align-items:center; margin-top: 10px;">
                <button onclick="alterarQtd(-1)" style="width:45px;height:45px;border-radius:50%;border:1px solid #ddd; font-size: 20px;">-</button>
                <span id="qtd-display" style="font-weight:bold; font-size: 20px;">1</span>
                <button onclick="alterarQtd(1)" style="width:45px;height:45px;border-radius:50%;border:1px solid #ddd; font-size: 20px;">+</button>
            </div>
        </div>
        <textarea id="modal-obs" placeholder="Alguma observa√ß√£o? (ex: sem salada, molho √† parte)"></textarea>
        <button class="btn btn-main" onclick="confirmarNoCarrinho()">Adicionar ao Carrinho</button>
        <button class="btn" style="background:none; color: #999;" onclick="fecharModal()">Cancelar</button>
    </div>
</div>

<script>
    const produtos = [
        { id: 1, nome: "Prato Feito Gourmet", precoBase: 20.00, img: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400", tipo: "marmita" },
        { id: 2, nome: "X-Burger Especial", preco: 22.00, img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400" },
        { id: 3, nome: "Eggs Burger", preco: 24.00, img: "https://images.unsplash.com/photo-1525164286253-04e68b9d94c6?w=400" },
        { id: 4, nome: "X-Tudo", preco: 32.00, img: "https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?w=400" },
        { id: 5, nome: "Coca-Cola", preco: 7.50, img: "https://images.unsplash.com/photo-1554866585-cd94860890b7?w=400" },
        { id: 6, nome: "√Ågua Mineral", preco: 4.50, img: "https://images.unsplash.com/photo-1560023907-5f339617ea30?w=400" }
    ];

    let carrinho = [];
    let itemAtual = null;
    let qtdAtual = 1;

    window.onload = () => {
        const grid = document.getElementById('grid-produtos');
        produtos.forEach(p => {
            grid.innerHTML += `
                <div class="product-card" onclick="abrirModal(${p.id})">
                    <div class="product-img" style="background-image: url('${p.img}')"></div>
                    <div class="product-info">
                        <h4>${p.nome}</h4>
                        <strong>${p.precoBase ? 'A partir de R$ '+p.precoBase.toFixed(2) : 'R$ '+p.preco.toFixed(2)}</strong>
                    </div>
                </div>`;
        });
    };

    function abrirModal(id) {
        itemAtual = produtos.find(p => p.id === id);
        qtdAtual = 1;
        document.getElementById('modal-nome').innerText = itemAtual.nome;
        document.getElementById('qtd-display').innerText = qtdAtual;
        const area = document.getElementById('area-customizacao');
        area.innerHTML = "";

        if(itemAtual.tipo === "marmita") {
            area.innerHTML = `
                <div class="options-group">
                    <strong>1. Tamanho da Marmita:</strong>
                    <label class="option-item"><input type="radio" name="tam" value="P" data-p="20.00"> Marmita P - R$ 20,00</label>
                    <label class="option-item"><input type="radio" name="tam" value="M" data-p="24.00"> Marmita M - R$ 24,00</label>
                    <label class="option-item"><input type="radio" name="tam" value="G" data-p="28.00"> Marmita G - R$ 28,00</label>
                </div>
                <div class="options-group">
                    <strong>2. Escolha a Prote√≠na:</strong>
                    <label class="option-item"><input type="radio" name="carne" value="Peixe Grelhado"> Peixe Grelhado</label>
                    <label class="option-item"><input type="radio" name="carne" value="Bolonhesa"> Bolonhesa</label>
                    <label class="option-item"><input type="radio" name="carne" value="Frango Grelhado"> Frango Grelhado</label>
                </div>
                <div class="options-group">
                    <strong>3. Escolha o Arroz:</strong>
                    <label class="option-item"><input type="radio" name="arroz" value="Branco"> Arroz Branco</label>
                    <label class="option-item"><input type="radio" name="arroz" value="Br√≥colis"> Arroz c/ Br√≥colis</label>
                </div>
                <div class="options-group">
                    <strong>4. Acompanhamentos:</strong>
                    ${["Feij√£o Tropeiro", "Feij√£o Mulato", "Feij√£o Carioca", "Pur√™ de Batata", "Salada Maionese", "Salada Cenoura/Beterraba", "Farofa"].map(a => `
                        <label class="option-item"><input type="checkbox" name="comp" value="${a}"> ${a}</label>
                    `).join('')}
                </div>`;
        }
        document.getElementById('modal-qty').classList.remove('hidden');
    }

    function confirmarNoCarrinho() {
        let precoFinal = itemAtual.preco || 0;
        let info = "";
        
        if(itemAtual.tipo === "marmita") {
            const tam = document.querySelector('input[name="tam"]:checked');
            const carne = document.querySelector('input[name="carne"]:checked');
            const arroz = document.querySelector('input[name="arroz"]:checked');
            if(!tam || !carne || !arroz) return alert("Por favor, selecione Tamanho, Carne e Arroz!");
            
            precoFinal = parseFloat(tam.getAttribute('data-p'));
            const comps = Array.from(document.querySelectorAll('input[name="comp"]:checked')).map(c => c.value);
            info = `Tamanho: ${tam.value} | Carne: ${carne.value} | Arroz: ${arroz.value} | Acomp: ${comps.join(', ')}`;
        }

        carrinho.push({ ...itemAtual, qtd: qtdAtual, preco: precoFinal, total: precoFinal * qtdAtual, extras: info, obs: document.getElementById('modal-obs').value });
        atualizarResumo();
        fecharModal();
    }

    function atualizarResumo() {
        const container = document.getElementById('lista-carrinho');
        let total = 0;
        container.innerHTML = "";
        carrinho.forEach(i => {
            total += i.total;
            container.innerHTML += `
                <div class="resumo-item">
                    <strong>${i.qtd}x ${i.nome}</strong><br>
                    <small style="color: #666;">${i.extras ? i.extras : ''}</small><br>
                    ${i.obs ? '<small><i>Obs: '+i.obs+'</i></small><br>' : ''}
                    <strong>R$ ${i.total.toFixed(2)}</strong>
                </div>`;
        });
        document.getElementById('total-valor').innerText = `Total: R$ ${total.toFixed(2)}`;
        document.getElementById('btn-resumo').innerText = `Ver Carrinho (${carrinho.length})`;
    }

    function enviarWhatsApp() {
        const nome = document.getElementById('cliente-nome').value;
        const local = document.getElementById('cliente-local').value;
        if(!nome || !local || carrinho.length === 0) return alert("Por favor, preencha seu nome e local de entrega!");
        
        let msg = `*NOVO PEDIDO - SABOR & CIA*\nüë§ *Cliente:* ${nome}\nüìç *Local:* ${local}\nüí≥ *Pagamento:* ${document.getElementById('pagamento').value}\n\n`;
        carrinho.forEach(i => {
            msg += `‚úÖ *${i.qtd}x ${i.nome}*\n`;
            if(i.extras) msg += `   > ${i.extras}\n`;
            if(i.obs) msg += `   _Obs: ${i.obs}_\n`;
            msg += `   Subtotal: R$ ${i.total.toFixed(2)}\n\n`;
        });
        msg += `*TOTAL DO PEDIDO: R$ ${document.getElementById('total-valor').innerText.split('R$ ')[1]}*`;

        window.open(`https://wa.me/5522988302170?text=${encodeURIComponent(msg)}`, '_blank');
        irPara('tela-sucesso');
    }

    function irPara(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        if(id === 'tela-inicio') document.getElementById('step-1').classList.add('active');
        if(id === 'tela-lanches') document.getElementById('step-2').classList.add('active');
        if(id === 'tela-carrinho') document.getElementById('step-3').classList.add('active');
        window.scrollTo(0,0);
    }
    function fecharModal() { document.getElementById('modal-qty').classList.add('hidden'); }
    function alterarQtd(v) { qtdAtual = Math.max(1, qtdAtual + v); document.getElementById('qtd-display').innerText = qtdAtual; }
</script>
</body>
</html>